import { sendingCaso } from  './../redux/actions/AdmissionAction';
import Axios from "axios";

const getToken = async() => {
    const result = await Axios.post(window.REACT_APP_ADMISION+'GenerarTokenTests', {
          "key": "791c9419-b1d7-4002-80bc-a1eedf461ccd",
          "secret": "46d14424-69e7-4d9f-88ad-314cb3183816"
      });
    return result.data.token
}

describe("Crear Casos",()=>{
  
    it("Probar caso tipo trabajo",async()=>{
        //json con error --  rut invalido
         await sendingCaso({"id_tipo":1,"id_estado":2,"rut_paciente":"","mail_admisionista":"sadiazg@achs.cl","admision_json":{"percentage":3703.703703703704,"rut":"","isAfiliado":"","empresa":"","rutEmpresa":"70360100-6","isapreSeleccionado":{"id":"2000025835","nombre":"FONASA","otro":false},"lugarAccidente":"Al momento del accidente estaba 999999999999999999","objetoAccidente":"El accidente ocurrio con 99999999999999999999999999","descripcionAccidente":"Lo que ocurrio fue que 99999999999999999999","relatoAccidente":"Al momento del accidente estaba 999999999999999999. Lo que ocurrio fue que 99999999999999999999. El accidente ocurrio con 99999999999999999999999999.","volverAConcatenar":false,"testigos":{"nombre":"","cargo":""},"responsable":{"nombre":"","cargo":""},"fechaHoraResponsable":"","fechaHoraSiniestro":"08-02-2021 17:54","fechaHoraAtencion":"","SucursalEmpresa":"","DireccionEmpresa":"AVDA.GRECIA480","comunaEmpresa":"","direccionParticular":"DIAGONAL VICUÑA MACKENNA 1958, SANTIAGO","telefonoParticular":"+56 9 9999 9999","grupoEtnico":{"id":"00","descripcion":"NINGUNA"},"desarrollarTrabajoHabitual":"No","profesionForm":{"codigo":4419,"nombre":"Personal administrativo"},"cargoForm":"eeeeeeeeeeeeeeeeeeeeeeeee","tipoDeContrato":{"id":2,"nombre":"Plazo Fijo"},"tipoJornadaForm":{"id":"4","nombre":"Turno Rotativo","key":""},"tipoRemuneracion":{"id":2,"nombre":"Por Comisiones"},"categoriaOcupacionalForm":{"id":1,"nombre":"Empleadores"},"ingresoTrabajoActualVisual":"02-2021","ingresoTrabajoActual":"2021-02-01T00:00:00.000Z","inicioJornadaLaboral":"09:30","finJornadaLaboral":"18:30","sucursalEmpresaSiniestro":{"description":"Avenida Grecia 480, Ñuñoa, Chile","matched_substrings":[{"length":18,"offset":0}],"place_id":"EiJBdmVuaWRhIEdyZWNpYSA0ODAsIMORdcOxb2EsIENoaWxlIjESLwoUChIJr-CMt2PFYpYRCHQXerdLuykQ4AMqFAoSCSvs1urSz2KWEZgRKCj20O9K","reference":"EiJBdmVuaWRhIEdyZWNpYSA0ODAsIMORdcOxb2EsIENoaWxlIjESLwoUChIJr-CMt2PFYpYRCHQXerdLuykQ4AMqFAoSCSvs1urSz2KWEZgRKCj20O9K","structured_formatting":{"main_text":"Avenida Grecia 480","main_text_matched_substrings":[{"length":18,"offset":0}],"secondary_text":"Ñuñoa, Chile"},"terms":[{"offset":0,"value":"Avenida Grecia 480"},{"offset":20,"value":"Ñuñoa"},{"offset":27,"value":"Chile"}],"types":["street_address","geocode"]},"urlMapasucursalEmpresaSiniestro":"https://qa.salud.achs.cl/orquestador/api/geo/getMapaEstatico?id=EiJBdmVuaWRhIEdyZWNpYSA0ODAsIMORdcOxb2EsIENoaWxlIjESLwoUChIJr-CMt2PFYpYRCHQXerdLuykQ4AMqFAoSCSvs1urSz2KWEZgRKCj20O9K&size=300x280","SucursalEmpresaObjeto":{"sucursalCargo":"0000000151","codigo":151,"nombre":"","id_comuna":"101","comuna":"ANTOFAGASTA","codigo_region":2,"region":"II - Antofagasta","direccion":"AVDA.GRECIA480","latitud":"-23.500000000000","longitud":"-69.000000000000"},"centrosForm":{"id":21,"Centro_m":"Ancud","UO_Medica":"ANCMAPRI","UO_Tratamiento":"ANCTCAPR"},"siniestroDetalle":{},"siniestroOpciones":{"mensajeAlerta":"Este paciente ya tiene un siniestro","mensajeBoton":"Ver su(s) siniestro(s)","origen":"getRut"},"tipoSiniestro":{"Id":1,"Descripcion":"Accidente Trabajo"},"DireccionTemporal":{},"LatTemporal":"","LongTemporal":"","AccidenteEnSucursal":"No","sucursalCargo":"0000000151","comunaSiniestro":"aaaa","comunaDireccionParticular":" SANTIAGO","BP":"1002615349","mensajeErrorSAP":"","mensajeErrorApi":"","errorStep":0,"TrabajadorIndependiente":"No","tab":0,"coberturaSoap":"no","responsableForm":"No","CamposDocumentos":{"anteceContr":"","FechaOtroRe":"","HoraOtroRec":"","OtroRecinto":"","OtroRecintoSi":"","OtroRecintoNo":"x","CuentaConSi":"","CuentaConNo":"x","CuentaCual":"","DatosTestig":"","Mecanismo":"","PosibleCaus":"","MedioTransp":"","Otras":"","avisoPresen":"","avisoMail":"","avisoFono":"","avisoOtro":"","avisoCual":"","antecePartP":"","anteceConst":"","anteceVideS":"","anteceComSe":"","anteceOtro":"","anteceOtroC":"","anteceNocuenta":"x","anteceRespA":"","anteceRespO":"","anteceRegsA":"","anteceCertH":"","TestigoS":"","TestigoN":"x"},"molestiaEP":"","parteAfectadaEP":"","FechaSintomasEP":"","molestiasAnterioresEP":"","AgenteCausaEP":{},"TrabajoMolestiasEP":"","FechaExposicionAgenteEP":"","mismasMolestiasCompañerosEP":"","TipoAvisoResponsable":{},"usuarioSAP":"SADIAZG","tipoDocumento":"RU","datosAdicionalesSAP":{"apellidoMaterno":"DIAZZZ","apellidoPaterno":"SERGIO ANDRESSS","nombre":"GARECAAAA","fechaNacimiento":"1982-09-07","masculino":"X","femenino":"","nacionalidad":"AR","estadoCivil":"1"},"razonSocial":{"bp":"2000462553","name":"ASOCIACIÓN CHILENA DE SEGURIDAD","rut":"70360100-6"},"razonSocialForm":"ASOCIACIÓN CHILENA DE SEGURIDAD","cantidadSucursales":1,"comunaSucursal":{"id":86,"codigo_region":2,"codigo_comuna":"101","nombre":"ANTOFAGASTA"},"sucursales":[{"sucursalCargo":"0000000151","codigo":151,"nombre":"","id_comuna":"101","comuna":"ANTOFAGASTA","codigo_region":2,"region":"II - Antofagasta","direccion":"AVDA.GRECIA480","latitud":"-23.500000000000","longitud":"-69.000000000000"}],"codigoSucursal":151,"relatoAccidenteTemporal":"Al momento del accidente estaba 999999999999999999. Lo que ocurrio fue que 99999999999999999999. El accidente ocurrio con 99999999999999999999999999.","criteriosForm":{"id":1,"descripcion":"Otro"},"lugarReferenciaSiniestro":"refeeeeeeeeeeeeeeeee","afpForm":{"codigo":"002","nombre":"2 - CUPRUM","otro":false},"emailusuario":"sadiazg@achs.cl"},"telefono_paciente":"+56 9 9999 9999","email_paciente":"sadiazg@achs.cl"},await getToken())
         .catch(error => {
             expect(error.response.status).toEqual(409)
         })
    })
    it("Probar caso tipo trayecto",async()=>{
        //json con error --  rut invalido
         await sendingCaso({"id_tipo":1,"id_estado":2,"rut_paciente":"","mail_admisionista":"onunezc@ext.achs.cl","admision_json":{"percentage":3703.703703703704,"rut":"","isAfiliado":"","empresa":"","rutEmpresa":"70.360.100-6","isapreSeleccionado":{"id":"2000454950","nombre":"CONSALUD","otro":false},"lugarAccidente":"Al momento del accidente estaba asdasd","objetoAccidente":"El accidente ocurrio con asdsad","descripcionAccidente":"Lo que ocurrio fue que asdasd","relatoAccidente":"Al momento del accidente estaba asdasd. Lo que ocurrio fue que asdasd. El accidente ocurrio con asdsad.","volverAConcatenar":false,"testigos":{"nombre":"","cargo":""},"responsable":{"nombre":"","cargo":""},"fechaHoraResponsable":"","fechaHoraSiniestro":"08-02-2021 18:14","fechaHoraAtencion":"","SucursalEmpresa":"","DireccionEmpresa":"CARLOS CONDELL755","comunaEmpresa":"","direccionParticular":"DIAGONAL VICUÑA MACKENNA 1958, SANTIAGO","telefonoParticular":"+56 9 9999 9999","grupoEtnico":{"id":"00","descripcion":"NINGUNA"},"desarrollarTrabajoHabitual":"no","profesionForm":{"codigo":2619,"nombre":"Abogado(a)"},"cargoForm":"asdas","tipoDeContrato":{"id":1,"nombre":"Indefinido"},"tipoJornadaForm":{"id":"1","nombre":"Lunes a Viernes","key":""},"tipoRemuneracion":{"id":1,"nombre":"Salario Fijo"},"categoriaOcupacionalForm":{"id":2,"nombre":"Trabajador dependiente"},"ingresoTrabajoActualVisual":"02-2021","ingresoTrabajoActual":"2021-02-01T00:00:00.000Z","inicioJornadaLaboral":"09:30","finJornadaLaboral":"18:30","sucursalEmpresaSiniestro":{"description":"Carlos Condell 755, La Cisterna, Chile","matched_substrings":[{"length":18,"offset":0}],"place_id":"EiZDYXJsb3MgQ29uZGVsbCA3NTUsIExhIENpc3Rlcm5hLCBDaGlsZSIxEi8KFAoSCT2TAGdF2mKWET8m7SSHi9grEPMFKhQKEgmhkX4oTtpilhEb2nCKYEC-dQ","reference":"EiZDYXJsb3MgQ29uZGVsbCA3NTUsIExhIENpc3Rlcm5hLCBDaGlsZSIxEi8KFAoSCT2TAGdF2mKWET8m7SSHi9grEPMFKhQKEgmhkX4oTtpilhEb2nCKYEC-dQ","structured_formatting":{"main_text":"Carlos Condell 755","main_text_matched_substrings":[{"length":18,"offset":0}],"secondary_text":"La Cisterna, Chile"},"terms":[{"offset":0,"value":"Carlos Condell 755"},{"offset":20,"value":"La Cisterna"},{"offset":33,"value":"Chile"}],"types":["street_address","geocode"]},"urlMapasucursalEmpresaSiniestro":"https://desa.salud.achs.cl/orquestador/api/geo/getMapaEstatico?id=EiZDYXJsb3MgQ29uZGVsbCA3NTUsIExhIENpc3Rlcm5hLCBDaGlsZSIxEi8KFAoSCT2TAGdF2mKWET8m7SSHi9grEPMFKhQKEgmhkX4oTtpilhEb2nCKYEC-dQ&size=300x280","SucursalEmpresaObjeto":{"sucursalCargo":"0000000193","codigo":193,"nombre":"","id_comuna":"402","comuna":"BUIN","codigo_region":13,"region":"RM - Santiago","direccion":"CARLOS CONDELL755","latitud":"-30.000000000000","longitud":"-71.000000000000"},"centrosForm":{"id":54,"Centro_m":"Las Condes","UO_Medica":"LCNMAPRI","UO_Tratamiento":"LCNTCAPR"},"siniestroDetalle":{},"siniestroOpciones":{"mensajeAlerta":"Este paciente ya tiene un siniestro","mensajeBoton":"Ver su(s) siniestro(s)","origen":"getRut"},"tipoSiniestro":{"Id":2,"Descripcion":"Accidente Trayecto"},"DireccionTemporal":{},"LatTemporal":"","LongTemporal":"","AccidenteEnSucursal":"","sucursalCargo":"0000000193","comunaSiniestro":"aaaa","comunaDireccionParticular":" SANTIAGO","BP":"1002615349","mensajeErrorSAP":"","mensajeErrorApi":"","errorStep":0,"TrabajadorIndependiente":"","tab":0,"coberturaSoap":"no","responsableForm":"","CamposDocumentos":{"anteceContr":"","FechaOtroRe":"","HoraOtroRec":"","OtroRecinto":"","OtroRecintoSi":"","OtroRecintoNo":"x","CuentaConSi":"","CuentaConNo":"x","CuentaCual":"","DatosTestig":"","Mecanismo":"asdasd","PosibleCaus":"asdasd","MedioTransp":"Metro","Otras":"asdsad","avisoPresen":"","avisoMail":"","avisoFono":"","avisoOtro":"","avisoCual":"","antecePartP":"","anteceConst":"","anteceVideS":"","anteceComSe":"","anteceOtro":"","anteceOtroC":"","anteceNocuenta":"x","anteceRespA":"","anteceRespO":"","anteceRegsA":"","anteceCertH":"","TestigoS":"","TestigoN":"x","ParteAfecta":"Otras partes del cuerpo lesionadas"},"molestiaEP":"","parteAfectadaEP":"","FechaSintomasEP":"","molestiasAnterioresEP":"","AgenteCausaEP":{},"TrabajoMolestiasEP":"","FechaExposicionAgenteEP":"","mismasMolestiasCompañerosEP":"","TipoAvisoResponsable":{},"usuarioSAP":"SADIAZG","tipoDocumento":"RU","datosAdicionalesSAP":{"apellidoMaterno":"DIAZZZ","apellidoPaterno":"SERGIO ANDRESSS","nombre":"GARECAAAA","fechaNacimiento":"1982-09-07","masculino":"X","femenino":"","nacionalidad":"AR","estadoCivil":"1"},"razonSocial":{"bp":"2000462553","name":"ASOCIACIÓN CHILENA DE SEGURIDAD","rut":"70360100-6"},"razonSocialForm":"ASOCIACIÓN CHILENA DE SEGURIDAD","cantidadSucursales":1,"comunaSucursal":{"id":75,"codigo_region":13,"codigo_comuna":"402","nombre":"BUIN"},"sucursales":[{"sucursalCargo":"0000000193","codigo":193,"nombre":"","id_comuna":"402","comuna":"BUIN","codigo_region":13,"region":"RM - Santiago","direccion":"CARLOS CONDELL755","latitud":"-30.000000000000","longitud":"-71.000000000000"}],"codigoSucursal":193,"tipoAccidenteTrayectoForm":{"key":"1","value":"Domicilio - Trabajo","selected":true},"tipoAccTrayecto":"1","relatoAccidenteTemporal":"Al momento del accidente estaba asdasd. Lo que ocurrio fue que asdasd. El accidente ocurrio con asdsad.","criteriosForm":{"id":1,"descripcion":"Otro"},"lugarReferenciaSiniestro":"asdsasda","afpForm":{"codigo":"004","nombre":"4 - MODELO","otro":false},"AtencionMedica":"No","PruebasComplementarias":"No","emailusuario":"notienecorreo@achs.cl"},"telefono_paciente":"+56 9 9999 9999","email_paciente":"notienecorreo@achs.cl"},await getToken())
         .catch(error => {
            expect(error.response.status).toEqual(409)
         })
    })
    it("Probar caso tipo EP",async()=>{
        //json con error -- rut invalido
         const resultado =  await sendingCaso({"id_tipo":1,"id_estado":2,"rut_paciente":"","mail_admisionista":"onunezc@ext.achs.cl","admision_json":{"percentage":3703.703703703704,"rut":"","isAfiliado":"","empresa":"","rutEmpresa":"70.360.100-6","isapreSeleccionado":{"id":"2000454950","nombre":"CONSALUD","otro":false},"lugarAccidente":"","objetoAccidente":"","descripcionAccidente":"","relatoAccidente":"","volverAConcatenar":false,"testigos":{"nombre":"","cargo":""},"responsable":{"nombre":"","cargo":""},"fechaHoraResponsable":"","fechaHoraSiniestro":"","fechaHoraAtencion":"","SucursalEmpresa":"","DireccionEmpresa":"CALLE JUSEF175","comunaEmpresa":"","direccionParticular":"DIAGONAL VICUÑA MACKENNA 1958, SANTIAGO","telefonoParticular":"+56 9 9999 9999","grupoEtnico":{"id":"00","descripcion":"NINGUNA"},"desarrollarTrabajoHabitual":"","profesionForm":{"codigo":2619,"nombre":"Abogado(a)"},"cargoForm":"assadsa","tipoDeContrato":{"id":1,"nombre":"Indefinido"},"tipoJornadaForm":{"id":"1","nombre":"Lunes a Viernes","key":""},"tipoRemuneracion":{"id":1,"nombre":"Salario Fijo"},"categoriaOcupacionalForm":{"id":2,"nombre":"Trabajador dependiente"},"ingresoTrabajoActualVisual":"02-2021","ingresoTrabajoActual":"2021-02-01T00:00:00.000Z","inicioJornadaLaboral":"45:30","finJornadaLaboral":"18:30","sucursalEmpresaSiniestro":"","urlMapasucursalEmpresaSiniestro":"","SucursalEmpresaObjeto":{"sucursalCargo":"0000000241","codigo":241,"nombre":"","id_comuna":"201","comuna":"AISEN","codigo_region":11,"region":"XI - Coyhaique","direccion":"CALLE JUSEF175","latitud":"-30.000000000000","longitud":"-71.000000000000"},"centrosForm":{"id":54,"Centro_m":"Las Condes","UO_Medica":"LCNMAPRI","UO_Tratamiento":"LCNTCAPR"},"siniestroDetalle":{},"siniestroOpciones":{"mensajeAlerta":"Este paciente ya tiene un siniestro","mensajeBoton":"Ver su(s) siniestro(s)","origen":"getRut"},"tipoSiniestro":{"Id":3,"Descripcion":"Enfermedad Profesional"},"DireccionTemporal":{},"LatTemporal":"","LongTemporal":"","AccidenteEnSucursal":"","sucursalCargo":"0000000241","comunaSiniestro":"","comunaDireccionParticular":" SANTIAGO","BP":"1002615349","mensajeErrorSAP":"","mensajeErrorApi":"","errorStep":0,"TrabajadorIndependiente":"","tab":0,"coberturaSoap":"","responsableForm":"","CamposDocumentos":{"anteceContr":"","FechaOtroRe":"","HoraOtroRec":"","OtroRecinto":"","OtroRecintoSi":"","OtroRecintoNo":"x","CuentaConSi":"","CuentaConNo":"x","CuentaCual":"","DatosTestig":"","Mecanismo":"","PosibleCaus":"","MedioTransp":"","Otras":"","avisoPresen":"","avisoMail":"","avisoFono":"","avisoOtro":"","avisoCual":"","antecePartP":"","anteceConst":"","anteceVideS":"","anteceComSe":"","anteceOtro":"","anteceOtroC":"","anteceNocuenta":"x","anteceRespA":"","anteceRespO":"","anteceRegsA":"","anteceCertH":"","TestigoS":"","TestigoN":""},"molestiaEP":"sdassad","parteAfectadaEP":"asddassad","FechaSintomasEP":"08.02.2021","molestiasAnterioresEP":"no","AgenteCausaEP":{"id":"00000000000000000001","nombre":"0001 - Ruido (estable o fluctuante)"},"TrabajoMolestiasEP":"sadsdasad","FechaExposicionAgenteEP":"08.02.2021","mismasMolestiasCompañerosEP":"no","TipoAvisoResponsable":{},"usuarioSAP":"SADIAZG","tipoDocumento":"RU","datosAdicionalesSAP":{"apellidoMaterno":"DIAZZZ","apellidoPaterno":"SERGIO ANDRESSS","nombre":"GARECAAAA","fechaNacimiento":"1982-09-07","masculino":"X","femenino":"","nacionalidad":"AR","estadoCivil":"1"},"razonSocial":{"bp":"2000462553","name":"ASOCIACIÓN CHILENA DE SEGURIDAD","rut":"70360100-6"},"razonSocialForm":"ASOCIACIÓN CHILENA DE SEGURIDAD","cantidadSucursales":1,"comunaSucursal":{"id":25,"codigo_region":11,"codigo_comuna":"201","nombre":"AISEN"},"sucursales":[{"sucursalCargo":"0000000241","codigo":241,"nombre":"","id_comuna":"201","comuna":"AISEN","codigo_region":11,"region":"XI - Coyhaique","direccion":"CALLE JUSEF175","latitud":"-30.000000000000","longitud":"-71.000000000000"}],"codigoSucursal":241,"afpForm":{"codigo":"003","nombre":"3 - HABITAT","otro":false},"emailusuario":"notienecorreo@achs.cl"},"telefono_paciente":"+56 9 9999 9999","email_paciente":"notienecorreo@achs.cl"},await getToken())
         .catch(error => {
            expect(error.response.status).toEqual(409)
         })
    })
})
